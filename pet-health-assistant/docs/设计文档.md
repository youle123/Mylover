# AI宠物健康管理助手 - 设计文档

## 1. 产品概述

### 1.1 产品定位
AI宠物健康管理助手是一款专为宠物主人设计的智能健康管理小程序，通过数字化手段帮助用户科学管理宠物健康，提供个性化的AI建议和社交互动功能。

### 1.2 核心价值
- **健康管理数字化**: 将宠物健康数据进行系统化记录和分析
- **AI智能建议**: 基于数据分析提供个性化的健康建议
- **社交互动**: 连接宠物主人，分享经验和互助
- **便捷提醒**: 智能提醒系统，避免遗忘重要事项

## 2. 功能架构

### 2.1 功能模块图
```
AI宠物健康管理助手
├── 用户管理
│   ├── 用户注册/登录
│   ├── 个人资料管理
│   └── 隐私设置
├── 宠物档案管理
│   ├── 宠物信息录入
│   ├── 宠物照片管理
│   └── 多宠物支持
├── 健康数据管理
│   ├── 体重记录
│   ├── 饮食记录
│   ├── 运动记录
│   ├── 疫苗记录
│   └── 体检记录
├── 智能提醒系统
│   ├── 喂食提醒
│   ├── 疫苗提醒
│   ├── 体检提醒
│   └── 自定义提醒
├── AI健康建议
│   ├── 数据分析
│   ├── 异常预警
│   ├── 饮食建议
│   └── 运动建议
├── 社交互动
│   ├── 动态发布
│   ├── 经验分享
│   ├── 问答互助
│   └── 附近宠友
└── 在线咨询
    ├── 兽医咨询
    ├── 专家问答
    └── 紧急求助
```

### 2.2 用户流程图
```
用户进入小程序
    ↓
检查登录状态
    ↓
未登录 → 引导登录 → 完善资料
    ↓
已登录 → 进入首页
    ↓
查看宠物列表
    ↓
无宠物 → 添加宠物 → 创建档案
    ↓
有宠物 → 选择宠物 → 查看详情
    ↓
使用各项功能
    ├── 记录健康数据
    ├── 查看AI建议
    ├── 设置提醒
    ├── 社交互动
    └── 在线咨询
```

## 3. 界面设计

### 3.1 设计原则
- **简洁易用**: 界面简洁，操作直观
- **温馨可爱**: 符合宠物主题的温馨设计风格
- **信息层次**: 重要信息突出，次要信息弱化
- **一致性**: 保持设计风格和交互方式的一致性

### 3.2 色彩规范
- **主色调**: #FF6B9D (粉红色) - 温馨、可爱
- **辅助色**: #FF8FA3 (浅粉色) - 柔和、舒适
- **背景色**: #F8F9FA (浅灰色) - 干净、清爽
- **文字色**: #333333 (深灰色) - 清晰易读
- **成功色**: #34C759 (绿色) - 健康、正面
- **警告色**: #FF9500 (橙色) - 提醒、注意
- **危险色**: #FF3B30 (红色) - 紧急、重要

### 3.3 字体规范
- **主标题**: 32rpx, 粗体
- **副标题**: 28rpx, 中等
- **正文**: 26rpx, 常规
- **辅助文字**: 24rpx, 常规
- **小字**: 22rpx, 常规

### 3.4 间距规范
- **页面边距**: 30rpx
- **卡片间距**: 20rpx
- **元素间距**: 16rpx
- **小间距**: 10rpx

## 4. 数据库设计

### 4.1 用户表 (users)
```javascript
{
  _id: ObjectId,
  openid: String,        // 微信openid
  unionid: String,       // 微信unionid
  nickName: String,      // 昵称
  avatarUrl: String,     // 头像
  gender: Number,        // 性别
  country: String,       // 国家
  province: String,      // 省份
  city: String,          // 城市
  createTime: Date,      // 创建时间
  updateTime: Date,      // 更新时间
  lastLoginTime: Date    // 最后登录时间
}
```

### 4.2 宠物表 (pets)
```javascript
{
  _id: ObjectId,
  userId: String,        // 用户openid
  name: String,          // 宠物名称
  type: String,          // 宠物类型 (dog/cat/other)
  breed: String,         // 品种
  gender: String,        // 性别 (male/female)
  birthDate: Date,       // 出生日期
  weight: Number,        // 体重
  avatar: String,        // 头像
  description: String,   // 描述
  healthStatus: String,  // 健康状态 (good/warning/danger)
  createTime: Date,      // 创建时间
  updateTime: Date       // 更新时间
}
```

### 4.3 健康记录表 (health_records)
```javascript
{
  _id: ObjectId,
  userId: String,        // 用户openid
  petId: String,         // 宠物ID
  type: String,          // 记录类型 (weight/food/exercise/vaccine/checkup)
  value: Number,         // 数值
  unit: String,          // 单位
  note: String,          // 备注
  images: Array,         // 图片
  recordTime: Date,      // 记录时间
  createTime: Date       // 创建时间
}
```

### 4.4 提醒表 (reminders)
```javascript
{
  _id: ObjectId,
  userId: String,        // 用户openid
  petId: String,         // 宠物ID
  title: String,         // 提醒标题
  content: String,       // 提醒内容
  type: String,          // 提醒类型 (feed/vaccine/checkup/custom)
  time: Date,            // 提醒时间
  repeat: String,        // 重复类型 (once/daily/weekly/monthly)
  status: String,        // 状态 (active/completed/cancelled)
  createTime: Date       // 创建时间
}
```

## 5. API设计

### 5.1 用户相关
- `POST /saveUser` - 保存用户信息
- `GET /getUser` - 获取用户信息

### 5.2 宠物相关
- `GET /getPets` - 获取宠物列表
- `POST /addPet` - 添加宠物
- `PUT /updatePet` - 更新宠物信息
- `DELETE /deletePet` - 删除宠物

### 5.3 健康记录相关
- `GET /getHealthRecords` - 获取健康记录
- `POST /addHealthRecord` - 添加健康记录
- `PUT /updateHealthRecord` - 更新健康记录
- `DELETE /deleteHealthRecord` - 删除健康记录

### 5.4 提醒相关
- `GET /getReminders` - 获取提醒列表
- `POST /addReminder` - 添加提醒
- `PUT /updateReminder` - 更新提醒
- `DELETE /deleteReminder` - 删除提醒
- `POST /completeReminder` - 完成提醒

### 5.5 AI相关
- `POST /getAISuggestions` - 获取AI建议
- `POST /analyzeHealth` - 健康分析

### 5.6 社区相关
- `GET /getCommunityPosts` - 获取社区动态
- `POST /publishPost` - 发布动态
- `POST /likePost` - 点赞动态
- `POST /commentPost` - 评论动态

## 6. 技术架构

### 6.1 前端架构
- **框架**: 微信小程序原生框架
- **状态管理**: 页面级状态管理
- **组件化**: 自定义组件复用
- **样式**: WXSS + 全局样式变量

### 6.2 后端架构
- **云开发**: 微信云开发
- **云函数**: Node.js
- **数据库**: 云数据库 (MongoDB)
- **存储**: 云存储

### 6.3 第三方服务
- **AI服务**: 腾讯云AI
- **地图服务**: 腾讯地图
- **推送服务**: 微信模板消息

## 7. 性能优化

### 7.1 加载优化
- 图片懒加载
- 分页加载
- 缓存策略
- 预加载关键资源

### 7.2 体验优化
- 骨架屏加载
- 错误边界处理
- 网络异常处理
- 用户反馈机制

## 8. 安全考虑

### 8.1 数据安全
- 用户数据加密
- 敏感信息脱敏
- 访问权限控制
- 数据备份策略

### 8.2 隐私保护
- 最小化数据收集
- 用户授权机制
- 数据使用透明
- 删除权保障
